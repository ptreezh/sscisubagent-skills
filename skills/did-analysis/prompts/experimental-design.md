---
name: experimental-design
description: DID实验设计专家提示，提供政策机制分析、实验组对照组选择、时间窗口设定的标准化流程和质量检验
metadata:
  analysis_phase: experimental_design
  expertise_required: policy_expert
  time_estimate: 30-45_minutes
  depends_on: research_context
---

# DID实验设计专家提示

## 🎯 任务定义
执行DID实验设计，确保因果识别的理论基础和现实可行性。

## 📋 核心职责
- 政策理论框架构建
- 实验组对照组科学选择
- 时间窗口和处理强度设定
- 因果识别假设检验

## 🔄 标准化操作流程

### 步骤1: 政策理论框架分析
**目标**: 构建政策作用机制的理论基础
**操作**:
1. 识别政策核心目标和预期效果
2. 分析主要和次要作用渠道
3. 评估政策效果的时间特征
4. 识别潜在的异质性维度

**输出格式**:
```
政策目标: [核心问题描述]
作用机制: [主要渠道→次要渠道]
预期效果: [量化预期指标]
时间滞后: [效果显现周期]
异质性维度: [地区/群体/制度/经济]
```

### 步骤2: 实验组对照组选择
**目标**: 确保组别选择的科学性和可比性
**操作**:
1. 评估处理组和对照组的相似性
2. 检验选择性偏误和混淆因素
3. 验证平行趋势假设的理论基础
4. 评估样本规模和统计功效

### 步骤3: 时间窗口设定
**目标**: 确定处理前和处理后的观察窗口
**操作**:
1. 分析政策实施的确切时间点
2. 设定充分的处理前观察期
3. 确定政策效果的观察期长度
4. 评估时间窗口的合理性

### 步骤4: 因果识别假设检验
**目标**: 验证DID识别假设的满足程度
**操作**:
1. 平行趋势假设检验设计
2. 排他性约束评估
3. 稳定性假设验证
4. 内生性问题识别
预期方向: [差异的方向性预期]
```

### 第二阶段：实验组对照组选择 (10-15分钟)

#### 2.1 实验组选择标准
**任务**: 确定哪些个体/地区接受政策处理
**选择原则**:
- **政策覆盖**: 确实受到政策影响
- **处理强度**: 政策处理强度足够明显
- **数据可得**: 相关数据能够获取
- **代表性**: 能够代表政策目标群体

**实验组评估框架**:
```
候选单位: [具体个体/地区]
政策覆盖度: [高/中/低]
处理强度: [强/中/弱]
数据质量: [优/良/差]
代表性评分: [1-10分]
选择理由: [详细说明]
```

#### 2.2 对照组选择标准
**任务**: 选择合适的对照组确保因果识别有效性
**选择标准**:
- **相似性**: 与实验组在处理前高度相似
- **独立性**: 未受政策或相关政策影响
- **稳定性**: 不经历其他重大冲击
- **可比性**: 数据结构和质量可比

**对照组匹配算法**:
```python
# 倾向得分匹配思路
def select_control_group(treated_units, potential_controls, covariates):
    """
    对照组选择算法思路
    
    1. 计算倾向得分
    2. 进行匹配
    3. 检验平衡性
    4. 评估匹配质量
    """
    # 实际匹配逻辑在脚本中实现
    pass
```

#### 2.3 平衡性检验
**任务**: 检验实验组和对照组的可比性
**检验维度**:
- **处理前趋势**: 结果变量的处理前趋势
- **协变量平衡**: 控制变量的分布平衡
- **结构相似性**: 基本特征的相似程度
- **时间一致性**: 时间模式的一致性

### 第三阶段：时间窗口设定 (5-10分钟)

#### 3.1 处理时间确定
**任务**: 确定政策实施的准确时间点
**时间精度要求**:
- **政策实施时间**: 具体到月或季度
- **效果显现时间**: 考虑政策效果的滞后性
- **数据频率**: 与数据收集频率匹配
- **季节性调整**: 考虑季节性因素影响

**时间设定框架**:
```
政策实施时间: [具体年月]
预期效果滞后: [月/季度数]
数据观测频率: [年度/季度/月度]
季节性考虑: [是/否，具体说明]
```

#### 3.2 观察窗口设计
**任务**: 设计合适的处理前和处理后观察窗口
**窗口设计原则**:
- **处理前窗口**: 足够长以检验平行趋势
- **处理后窗口**: 足够长以观察政策效果
- **数据质量**: 确保各期数据质量可靠
- **外部环境**: 避免其他重大政策冲击

**窗口设计标准**:
```
处理前窗口: [起始时间-处理时间]
窗口长度: [期数]
数据处理: [缺失值处理方式]
质量评估: [数据质量评分]
```

### 第四阶段：处理强度和控制变量 (5-10分钟)

#### 4.1 处理强度评估
**任务**: 评估政策处理的强度和变化
**强度评估维度**:
- **政策覆盖度**: 政策覆盖的广度
- **执行力度**: 政策执行的强度
- **持续时间**: 政策效应的持续时间
- **变化程度**: 相对于基准的变化程度

**强度量化方法**:
```python
# 处理强度量化思路
def quantify_treatment_intensity(policy_data):
    """
    处理强度量化方法
    
    1. 覆盖度指标: 受影响人口比例
    2. 执行力度指标: 资源投入程度
    3. 时间持续性指标: 政策持续时间
    4. 综合强度指数: 多维度综合
    """
    # 具体量化逻辑在脚本中实现
    pass
```

#### 4.2 控制变量选择
**任务**: 选择影响结果的重要控制变量
**选择标准**:
- **理论相关性**: 基于理论的重要影响因素
- **数据可得性**: 能够获得可靠数据
- **时变性**: 随时间变化的变量
- **外生性**: 不受政策处理影响的变量

**控制变量分类**:
```
经济控制变量: [GDP、收入、就业等]
社会控制变量: [人口、教育、健康等]
制度控制变量: [政府质量、法治水平等]
地理控制变量: [区位、资源禀赋等]
```

## 🔍 质量检查清单

### 实验设计质量
- [ ] 政策机制分析是否深入全面？
- [ ] 实验组选择是否合理有据？
- [ ] 对照组是否具有可比性？
- [ ] 时间窗口设定是否科学？

### 因果识别有效性
- [ ] 是否满足DID的基本假设？
- [ ] 平行趋势假设是否合理？
- [ ] 是否存在明显的内生性问题？
- [ ] 外部冲击是否得到控制？

### 数据可行性
- [ ] 数据质量是否满足分析要求？
- [ ] 样本量是否足够进行因果推断？
- [ ] 关键变量是否能够准确测量？
- [ ] 数据时间跨度是否合适？

## ✅ 质量检验标准

### 理论基础检验
- [ ] 政策机制分析是否深入完整
- [ ] 因果链条是否逻辑清晰
- [ ] 异质性维度是否充分考虑
- [ ] 理论假设是否可验证

### 实验设计检验
- [ ] 组别选择是否科学可比
- [ ] 时间窗口设定是否合理
- [ ] 样本量是否满足统计要求
- [ ] 变量测量是否准确可靠

### 因果识别检验
- [ ] 平行趋势假设是否合理
- [ ] 排他性约束是否满足
- [ ] 内生性问题是否得到控制
- [ ] 外部冲击是否得到识别

## 📤 标准化输出

### 必需输出
1. **实验设计方案**: 完整的设计文档
2. **数据准备清单**: 具体的数据要求
3. **模型设定建议**: 推荐的模型框架
4. **检验计划**: 需要执行的统计检验

### 可选输出
1. **敏感性分析方案**: 建议的敏感性检验
2. **异质性分析计划**: 预设的异质性检验
3. **稳健性检验清单**: 建议的稳健性检验

## ⚠️ 关键风险控制

### 高风险问题
- 政策机制理解不充分
- 对照组选择存在偏误
- 平行趋势假设明显违反
- 数据质量严重不足

### 风险缓解策略
- 深入政策研究和专家咨询
- 多种对照组方案对比
- 充分的处理前观察期
- 严格的数据质量检验