# SSCI技能创建专家 - 详细流程文档

## 1. 核心任务详解

### 1.1 技能开发模式基础
SSCI技能创建专家基于DID（差分-in-差分）和msQCA（多值定性比较分析）技能的开发经验，提供标准化的技能创建指导。这些经验包括：

- **渐进式信息披露架构**：将信息按重要性和使用频率分层组织
- **定性与定量分工原则**：明确AI和脚本的职责边界
- **模块化设计模式**：将复杂技能分解为独立可维护的模块
- **质量控制体系**：确保技能在理论和实践层面的一致性

### 1.2 标准化创建流程
创建一个高质量的技能需要遵循标准化的流程，确保技能符合agentskills.io标准，具备良好的可用性和可维护性。

## 2. 标准化架构详解

### 2.1 三层渐进式信息披露框架详解

#### Level 1: 元数据层 (~100 tokens, 始终加载)
元数据层是技能的"身份证"，包含技能的基本信息，这些信息在技能被调用时始终加载，确保AI能够快速识别技能的功能和用途。

**完整YAML frontmatter示例**:
```yaml
---
name: skill-name                    # 1-64字符，小写字母、数字、连字符，唯一标识
description: 功能描述和使用时机      # 1-1024字符，包含关键词，清晰说明技能用途
license: MIT                        # 开源许可证
compatibility: 系统要求             # 兼容的运行环境
metadata:
  domain: 专业领域                  # 技能所属的专业领域
  methodology: 核心方法             # 技能使用的核心方法论
  complexity: 复杂度级别            # 技能的复杂度级别 (basic/intermediate/advanced/expert)
  version: 版本号                   # 语义化版本号 (MAJOR.MINOR.PATCH)
  integration_type: integration_type # 集成类型 (development_framework, analysis_tool等)
  author: zhangshuren@hznu.edu.cn  # 作者邮箱
  website: http://agentpsy.com      # 相关网站
allowed-tools: 工具列表             # 技能允许使用的工具 (python, bash, read_file等)
---
```

**设计原则**:
- **简洁性**: 元数据应简洁明了，避免冗余信息
- **唯一性**: name字段必须唯一，避免与其他技能冲突
- **准确性**: 所有信息必须准确，特别是兼容性和依赖信息

#### Level 2: 指令层 (<5000 tokens, 触发时加载)
指令层包含技能的核心功能和使用方法，当技能被触发时加载。这一层需要平衡信息的完整性和简洁性。

**核心组成部分**:
1. **任务定义**: 明确技能的核心任务和职责
2. **标准化流程**: 分步骤的操作指南
3. **质量标准**: 明确的检验清单
4. **输出规范**: 标准化的输出格式

**结构示例**:
```markdown
# 技能名称

## 概述
简要说明技能的目的和意义。

## 使用时机
明确说明在什么情况下应该使用此技能，包括触发条件和适用场景。

## 快速开始
提供最简单的使用方法，帮助用户快速上手。

## 核心流程
详细说明技能的执行步骤，包括：
- 步骤1: 任务描述
- 步骤2: 任务描述
- 步骤3: 任务描述

## 输出格式
说明技能的输出格式和结构。

## 质量标准
提供质量检查清单，确保输出质量。

## 深入学习
提供进一步学习的资源链接。

## 完成标志
明确技能执行完成的标准。
```

#### Level 3: 资源层 (按需加载, 不占用上下文)
资源层包含详细的参考资料、专业提示词和计算脚本，这些内容在需要时才加载，不占用AI的上下文空间。

**资源类型**:
1. **专业提示词**: 自我闭包的MD文件，用于指导AI执行特定任务
2. **计算脚本**: 模块化的Python脚本，执行定量分析
3. **参考文档**: 详细的方法论说明和最佳实践
4. **资源文件**: 模板、示例数据等

### 2.2 自我闭包提示词设计原则详解

#### 任务明确性
每个提示词应该专注于单一任务，避免功能混杂。明确的任务定义有助于AI准确理解需求并产生预期结果。

**实现方法**:
- 在提示词开头明确说明任务目标
- 提供具体的执行步骤
- 定义期望的输出格式

#### 结构一致性
所有提示词应采用一致的结构，便于维护和使用。统一的结构有助于AI理解不同提示词的模式。

**标准结构**:
```
# 任务名称

## 任务目标
明确说明此提示词的任务目标。

## 执行步骤
分步骤说明如何执行任务。

## 输入要求
说明需要提供哪些输入信息。

## 输出格式
定义输出的格式和结构。

## 质量检查
提供质量检查清单。
```

#### 内容完备性
提示词应包含执行任务所需的所有信息，避免依赖外部上下文。

**实现要点**:
- 提供必要的背景信息
- 定义所有使用的术语
- 说明执行的约束条件

## 3. 定性与定量分工原则详解

### 3.1 AI负责领域 (定性分析)

#### 理论思考
AI擅长处理概念性、理论性的问题，能够进行高层次的抽象思考。

**具体任务**:
- **概念分析**: 识别和分析概念之间的关系
- **机制构建**: 构建理论机制和解释框架
- **框架完善**: 完善和扩展理论框架

**实现方式**:
- 使用专业的提示词指导AI进行理论思考
- 提供丰富的理论背景知识
- 引导AI进行深入的分析

#### 判断决策
AI能够基于提供的信息做出判断和决策。

**具体任务**:
- **方案制定**: 制定分析方案和策略
- **策略选择**: 在多个选项中选择最佳策略
- **质量评估**: 评估分析结果的质量

**实现方式**:
- 提供决策框架和评估标准
- 引导AI使用逻辑推理
- 提供质量评估清单

#### 解释阐释
AI能够解释复杂的结果并生成有意义的解释。

**具体任务**:
- **结果解读**: 解释分析结果的含义
- **意义提炼**: 提炼结果的实际意义
- **建议生成**: 基于结果生成建议

**实现方式**:
- 提供解释框架
- 引导AI连接理论与实践
- 生成面向用户的解释

### 3.2 脚本负责领域 (定量计算)

#### 精确计算
脚本擅长执行精确的数值计算和算法实现。

**具体任务**:
- **统计分析**: 执行统计检验和模型拟合
- **数值运算**: 执行复杂数值计算
- **算法执行**: 实现特定算法

**实现方式**:
- 使用Python库（如numpy, pandas, scipy）
- 实现高效的算法
- 确保计算准确性

#### 数据处理
脚本能够高效处理大量数据。

**具体任务**:
- **数据清洗**: 清理和预处理数据
- **格式转换**: 转换数据格式
- **质量检验**: 检验数据质量

**实现方式**:
- 使用pandas进行数据操作
- 实现数据验证函数
- 提供数据质量报告

#### 逻辑推理
脚本执行确定性的逻辑流程。

**具体任务**:
- **确定性流程**: 执行预定的处理流程
- **规则验证**: 验证数据是否符合规则
- **条件判断**: 基于条件执行不同逻辑

**实现方式**:
- 使用if-else和循环结构
- 实现规则引擎
- 提供逻辑验证函数

## 4. 技能创建流程详解

### 4.1 第一阶段：需求分析与设计

#### 4.1.1 明确专业领域和方法论
在创建技能之前，需要深入分析技能的专业领域和使用的方法论。

**分析步骤**:
1. **领域分析**:
   - 确定技能所属的专业领域（如社会学、心理学、经济学）
   - 分析该领域的核心概念和理论
   - 了解领域内的标准方法和工具

2. **方法论分析**:
   - 确定技能使用的核心方法论
   - 分析方法论的理论基础
   - 了解方法论的应用场景和限制

3. **功能定位**:
   - 明确技能的核心功能
   - 分析技能与现有技能的关系
   - 确定技能的独特价值

#### 4.1.2 分析定性与定量分工点
根据任务的性质，确定哪些部分由AI处理（定性），哪些部分由脚本处理（定量）。

**分析框架**:
```
任务分解:
├── 需要AI处理的任务 (定性)
│   ├── 概念分析
│   ├── 框架构建
│   ├── 质量评估
│   └── 结果解释
└── 需要脚本处理的任务 (定量)
    ├── 数值计算
    ├── 数据处理
    ├── 算法执行
    └── 逻辑验证
```

#### 4.1.3 设计四层次架构
设计技能的四层次架构，确保信息的渐进式披露。

**架构设计**:
1. **Level 1 - 元数据层**: 基本信息
2. **Level 2 - 指令层**: 核心功能
3. **Level 3 - 理论指导层**: 专业指导
4. **Level 4 - 计算执行层**: 代码实现

#### 4.1.4 创建技能目录结构
按照标准化的目录结构创建技能文件夹。

**标准结构**:
```
skill-name/
├── SKILL.md                 # 主技能文件，包含YAML frontmatter和核心文档
├── prompts/                 # 理论指导层，包含专业提示词
│   ├── phase1-theory.md     # 理论分析阶段的提示词
│   ├── phase2-planning.md   # 方案制定阶段的提示词
│   ├── phase3-guidance.md   # 执行指导阶段的提示词
│   └── phase4-interpretation.md # 结果解释阶段的提示词
├── scripts/                 # 计算执行层，包含Python脚本
│   ├── core_algorithm.py    # 核心算法实现
│   ├── data_processor.py    # 数据处理脚本
│   ├── quality_checker.py   # 质量检查脚本
│   └── integrator.py        # 集成引擎脚本
├── references/              # 参考文档，包含方法论和最佳实践
│   ├── METHODOLOGY.md       # 方法论详细说明
│   └── BEST_PRACTICES.md    # 最佳实践指南
├── assets/                  # 资源文件，包含模板等
│   └── templates/           # 各种模板文件
└── tests/                   # 测试文件
    ├── unit_tests.py        # 单元测试
    └── integration_tests.py # 集成测试
```

### 4.2 第二阶段：理论指导层开发

#### 4.2.1 创建专业提示词
为每个分析阶段创建专业的提示词文件。

**提示词开发步骤**:
1. **确定任务目标**: 明确提示词要完成的具体任务
2. **设计执行流程**: 规划任务的执行步骤
3. **定义输入输出**: 明确需要的输入和期望的输出
4. **编写提示词**: 按照标准结构编写提示词
5. **测试验证**: 验证提示词的有效性

**提示词编写规范**:
```markdown
---
name: phaseX-task-name
description: 提示词的功能描述
author: 作者信息
version: 版本号
---

# 任务名称

## 任务目标
明确说明此提示词的任务目标。

## 执行步骤
1. 步骤1: 具体说明
2. 步骤2: 具体说明
3. 步骤3: 具体说明

## 输入要求
说明需要提供哪些输入信息：
- 信息1: 描述
- 信息2: 描述

## 输出格式
定义输出的格式和结构。

## 质量检查
提供质量检查清单：
- [ ] 检查项1
- [ ] 检查项2
```

#### 4.2.2 质量检验清单
为每个提示词创建质量检验清单，确保输出质量。

**检验清单示例**:
- [ ] 任务目标是否明确
- [ ] 执行步骤是否完整
- [ ] 输入要求是否清晰
- [ ] 输出格式是否规范
- [ ] 逻辑是否一致
- [ ] 术语使用是否准确

### 4.3 第三阶段：计算执行层开发

#### 4.3.1 模块化脚本设计
按照单一职责原则设计脚本，每个脚本只负责一个功能。

**设计原则**:
1. **单一职责**: 每个脚本只负责一个功能
2. **高内聚低耦合**: 脚本内部高度相关，脚本间低依赖
3. **接口标准化**: 统一的输入输出接口
4. **错误处理**: 完善的错误处理机制

**脚本开发规范**:
```python
def execute_computation(data, parameters):
    """
    标准化计算函数

    Parameters:
    -----------
    data : 输入数据
        需要处理的数据
    parameters : dict
        计算参数

    Returns:
    --------
    dict : 
        {
            'results': 计算结果,
            'quality_metrics': 质量指标,
            'diagnostics': 诊断信息
        }
    """
    try:
        # 核心计算逻辑
        results = core_calculation(data, parameters)

        # 质量检验
        quality_metrics = assess_quality(results)

        # 诊断信息
        diagnostics = generate_diagnostics(results)

        return {
            'results': results,
            'quality_metrics': quality_metrics,
            'diagnostics': diagnostics
        }

    except Exception as e:
        return {
            'error': str(e),
            'quality_metrics': None,
            'diagnostics': None
        }
```

#### 4.3.2 错误处理机制
实现完善的错误处理机制，确保脚本的健壮性。

**错误处理策略**:
1. **异常捕获**: 捕获并处理各种异常
2. **错误记录**: 记录错误信息以便调试
3. **优雅降级**: 在错误情况下提供备选方案
4. **用户友好**: 提供清晰的错误信息

### 4.4 第四阶段：集成引擎开发

#### 4.4.1 智能决策逻辑
开发集成引擎，协调AI和脚本的工作。

**引擎架构**:
```python
class SkillIntegrator:
    def __init__(self):
        # 初始化各组件
        self.state = {}  # 状态管理
        self.quality_monitor = QualityMonitor()  # 质量监控
        self.dependency_manager = DependencyManager()  # 依赖管理
        
    def execute_skill(self, data, context):
        # 状态初始化
        self.initialize_state(context)
        
        # 按阶段执行
        results = {}
        for phase in self.phases:
            # 根据需要加载AI提示词或执行脚本
            if self.should_load_prompt(phase):
                prompt_result = self.load_and_execute_prompt(phase, context)
                results[phase] = prompt_result
                
            if self.should_execute_script(phase):
                script_result = self.execute_script(phase, data, results)
                results[phase] = script_result
                
            # 质量检验
            quality_issues = self.quality_monitor.check_phase(phase, results[phase])
            if quality_issues:
                self.handle_quality_issues(phase, quality_issues)
        
        return self.integrate_results(results)
```

#### 4.4.2 状态跟踪管理
实现状态跟踪，确保技能执行过程的可追溯性。

**状态管理**:
- **执行状态**: 跟踪技能的执行进度
- **中间结果**: 保存中间计算结果
- **错误日志**: 记录执行过程中的错误
- **性能指标**: 监控执行性能

### 4.5 第五阶段：测试与优化

#### 4.5.1 单元测试
为每个脚本和提示词编写单元测试。

**测试内容**:
- **功能测试**: 验证功能是否按预期工作
- **边界测试**: 测试边界条件和异常情况
- **性能测试**: 验证性能是否满足要求

#### 4.5.2 集成测试
测试各组件之间的协作。

**测试内容**:
- **接口测试**: 验证组件间接口的兼容性
- **流程测试**: 验证完整执行流程
- **数据流测试**: 验证数据在各组件间的正确传递

#### 4.5.3 用户场景测试
模拟真实用户使用场景进行测试。

**测试内容**:
- **功能完整性**: 验证功能是否满足用户需求
- **用户体验**: 评估用户使用体验
- **性能表现**: 验证在真实场景下的性能

## 5. 文档编写规范详解

### 5.1 内容原则详解

#### 用户导向
所有文档内容都应以用户需求为中心，避免不必要的技术细节或自我标榜。

**实现方法**:
- 从用户角度描述功能
- 重点说明功能价值
- 避免技术术语堆砌

#### 功能描述
清晰描述技能的功能和使用方法。

**描述要点**:
- 说明技能能解决什么问题
- 描述使用场景
- 说明预期输出

#### 概念准确
确保术语使用精确一致。

**准确性要求**:
- 使用领域标准术语
- 保持术语使用一致性
- 提供术语定义

#### 逻辑清晰
文档结构和论述应逻辑清晰。

**清晰性要求**:
- 采用清晰的结构
- 保持论述连贯
- 避免逻辑矛盾

### 5.2 文档结构详解

#### SKILL.md - 主技能文件
包含技能的核心信息和使用指南。

**标准结构**:
```markdown
---
YAML frontmatter
---

# 技能名称

## 概述
技能的目的和意义。

## 使用时机
说明在什么情况下使用此技能。

## 快速开始
提供简单的使用方法。

## 核心流程
详细说明执行步骤。

## 输出格式
说明输出的格式和结构。

## 质量标准
提供质量检查清单。

## 深入学习
提供进一步学习的资源。

## 完成标志
明确完成的标准。
```

#### prompts/*.md - 专业提示词
包含指导AI执行特定任务的提示词。

**标准结构**:
```markdown
---
YAML frontmatter
---

# 任务名称

## 任务目标
明确任务目标。

## 执行步骤
分步骤说明执行方法。

## 输入要求
说明需要的输入。

## 输出格式
定义输出格式。

## 质量检查
提供质量检查清单。
```

#### references/*.md - 方法论说明
包含详细的理论背景和最佳实践。

**内容包括**:
- 理论基础
- 方法论说明
- 最佳实践
- 常见问题解答

## 6. 质量保证体系详解

### 6.1 三层质量控制详解

#### 6.1.1 输入质量控制
确保输入数据的完整性和理论基础的准确性。

**控制措施**:
- **数据完整性检验**: 验证输入数据的完整性
- **格式验证**: 验证输入数据的格式
- **理论一致性检验**: 验证输入是否符合理论要求

#### 6.1.2 过程质量控制
确保分析过程的逻辑正确性和计算准确性。

**控制措施**:
- **逻辑验证**: 验证分析逻辑的正确性
- **计算准确性检验**: 验证计算结果的准确性
- **中间结果检验**: 检验关键步骤的结果

#### 6.1.3 输出质量控制
确保最终结果的稳健性和应用价值。

**控制措施**:
- **结果一致性检验**: 验证结果的一致性
- **稳健性检验**: 验证结果对参数变化的稳健性
- **应用价值评估**: 评估结果的实际应用价值

### 6.2 自动化质量监控

#### 监控机制
实现自动化的质量监控，实时检测质量问题。

**监控内容**:
- **理论一致性**: 检测分析是否符合理论
- **计算准确性**: 检测计算结果的准确性
- **结果稳健性**: 检测结果的稳定性

#### 质量评估器
开发自动化的质量评估工具。

**评估维度**:
- **理论维度**: 评估理论应用的准确性
- **技术维度**: 评估计算实现的准确性
- **应用维度**: 评估结果的实用性

## 7. 技能部署指南详解

### 7.1 标准化部署流程详解

#### 7.1.1 结构验证
验证技能目录结构是否符合标准。

**验证内容**:
- 检查必需文件是否存在
- 验证文件结构是否正确
- 确认文件权限设置

#### 7.1.2 格式检查
验证YAML frontmatter和MD格式是否正确。

**检查项目**:
- YAML语法正确性
- 必需字段完整性
- MD格式规范性

#### 7.1.3 功能测试
执行完整的功能测试。

**测试范围**:
- 单元测试
- 集成测试
- 端到端测试

#### 7.1.4 质量评估
评估技能是否达到质量标准。

**评估标准**:
- 功能完整性
- 代码质量
- 文档质量
- 用户体验

### 7.2 部署检查清单详解

#### 7.2.1 SKILL.md检查
- [ ] YAML frontmatter完整
- [ ] 包含所有必需部分
- [ ] 内容符合规范
- [ ] 链接有效

#### 7.2.2 prompts文件检查
- [ ] 所有必需的prompts文件存在
- [ ] 格式正确
- [ ] 内容完整
- [ ] 与技能功能匹配

#### 7.2.3 脚本检查
- [ ] 所有脚本可独立运行
- [ ] 错误处理完善
- [ ] 代码质量良好
- [ ] 有适当的注释

## 8. 开发工具详解

### 8.1 模板生成器
自动生成标准化的技能目录结构。

**功能特性**:
- 快速创建标准目录结构
- 自动生成模板文件
- 支持自定义配置

### 8.2 格式验证器
检查YAML和MD格式是否符合标准。

**验证功能**:
- YAML语法检查
- MD格式验证
- 标准符合性检查

### 8.3 质量评估器
自动评估技能质量。

**评估维度**:
- 代码质量
- 文档质量
- 功能完整性
- 用户体验

### 8.4 测试框架
提供标准化的测试工具。

**测试类型**:
- 单元测试
- 集成测试
- 性能测试
- 用户体验测试

## 9. 参考案例详解

### 9.1 DID分析技能案例
差分-in-差分分析技能展示了如何处理因果推断问题。

**关键特性**:
- 定性分析：识别因果关系
- 定量计算：执行DID计算
- 结果解释：解释因果效应

### 9.2 msQCA分析技能案例
多值定性比较分析技能展示了如何处理复杂因果关系。

**关键特性**:
- 定性分析：识别因果路径
- 定量计算：执行QCA算法
- 结果解释：解释因果配置